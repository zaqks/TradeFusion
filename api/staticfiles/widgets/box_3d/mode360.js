class Mode360{constructor(t){this.SENSITIVITY=2,this.DELAY=80,this.box3d=document.getElementById(t),this.init(),this.enable_resize_event(),this.track_events_desktop(),this.track_events_mobile()}init(){var t=Array.from(this.box3d.children);this.anim=t.pop(),this.anim.style.display="flex",this.cnv=t.pop(),this.ctx=this.cnv.getContext("2d"),this.cnv_init(),this.current_indx=0,this.imgs=[],Promise.all(Array.from(t[0].children).map(n=>new Promise((t,e)=>{const i=new Image;i.src=n.src,n.remove(),i.onload=()=>t(i),i.onerror=()=>e(new Error("angle error"))}))).then(t=>{this.imgs=t,this.draw_angle(0),this.load_ok(),this.auto_rotate(2,()=>{this.auto_rotate(-2)})})}load_ok(){this.anim.style.display="none"}cnv_init(){this.cnv.width=this.box3d.offsetWidth,this.cnv.height=this.box3d.offsetHeight}draw_angle(t){this.imgs.length&&(this.current_indx=t,t=this.imgs.length-1,this.current_indx>t&&(this.current_indx=0),this.current_indx<0&&(this.current_indx=t),t=this.imgs[this.current_indx],this.ctx.drawImage(t,0,0,t.width,t.height,0,0,this.cnv.width,this.cnv.height))}step_rotate(t=!0){this.draw_angle(this.current_indx+(t?-1:1))}enable_resize_event(){window.addEventListener("resize",()=>{this.cnv_init(),this.draw_angle(this.current_indx)})}track_events_desktop(){var i,n,s=!1;const h=this;this.box3d.addEventListener("mousedown",function(t){s=!0,i=null,n=0}),this.box3d.addEventListener("mouseup",function(t){s=!1}),this.box3d.addEventListener("mouseleave",function(t){s=!1}),this.box3d.addEventListener("mousemove",function(t){var e;s&&(t=t.pageX-this.getBoundingClientRect().left,e=(i=null==i?t:i)-t,n+=e,Math.abs(n)>h.SENSITIVITY&&(e=Math.abs(n)/n,h.step_rotate(0<e),n=0),i=t)})}track_events_mobile(){var i,n,s=!1;const h=this;this.box3d.addEventListener("touchstart",function(t){s=!0,i=null,n=0}),this.box3d.addEventListener("touchend",function(t){s=!1}),this.box3d.addEventListener("mouseleave",function(t){s=!1}),this.box3d.addEventListener("touchmove",function(t){var e;s&&(t=t.touches[0].pageX-this.getBoundingClientRect().left,e=(i=null==i?t:i)-t,n+=e,Math.abs(n)>h.SENSITIVITY&&(e=Math.abs(n)/n,h.step_rotate(0<e),n=0),i=t)})}auto_rotate(t=1,e=null){if(this.imgs.length){const n=this;var i=Math.abs(t)*this.imgs.length;const s=0<t,h=setInterval(function(){n.step_rotate(s),--i||(e&&e(),clearInterval(h))},n.DELAY)}}}